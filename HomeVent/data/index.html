<!DOCTYPE html>
<html>

<head>
  <title>Weather Station</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,600' rel='stylesheet' />
  <link rel="stylesheet" href="style.css">
  <script type="text/javascript">
    var ventilation;
    var temp, humidity, pressure;
    var esp32time;
    function loadValues() {
      var xh = new XMLHttpRequest();
      xh.onreadystatechange = function () {
        if (xh.readyState == 4) {
          if (xh.status == 200) {
            var res = JSON.parse(xh.responseText);
            temp = res.data.temp;
            humidity = res.data.humidity;
            pressure = res.data.pressure;
            ventilation = res.action.ventilation;
            var t = res.config.time;
            esp32time = t.hour + ":" + t.minute + ":" + t.second + " " + t.day + "-" + t.month + "-" + t.year;
            setValues();
          }
        }
      };
      xh.open("GET", "/api", true);
      xh.send(null);
    };
    function setValues() {
      document.getElementById("temp").innerText = temp;
      document.getElementById("humidity").innerText = humidity;
      if (ventilation == "1") {
        document.getElementById("ventlight").style.visibility = "visible";
      } else {
        document.getElementById("ventlight").style.visibility = "hidden";
      }
    }
    function onBodyLoad() {
      loadValues();
      setValues();
    }

    function sendRequest(param, value) {
      var xh = new XMLHttpRequest();
      xh.onreadystatechange = function () {
        if (xh.readyState == 4) {
          if (xh.status == 200) {
          }
        }
      };
      xh.open("PUT", "/api?" + param + "=" + value, true);
      xh.send(null);
    };

    setInterval(onBodyLoad, 10000);
  </script>
</head>

<body onload="onBodyLoad()">
  <div class='container'>
    <div class="buttons">
      <div class="vent">
        <button class="btn success"
          onclick="sendRequest('ventTime', document.getElementById('rangevalue').innerText)">Ventilation</button>
        <svg id="ventlight" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
          width="20px" height="20px" x="0px" y="0px" viewBox="0 0 512 512"
          style="enable-background:new 0 0 512 512;visibility: hidden;" xml:space="preserve">
          <g id="lightening">
            <path d="M400.268,175.599c-1.399-3.004-4.412-4.932-7.731-4.932h-101.12l99.797-157.568c1.664-2.628,1.766-5.956,0.265-8.678
			C389.977,1.69,387.109,0,384.003,0H247.47c-3.234,0-6.187,1.826-7.637,4.719l-128,256c-1.323,2.637-1.178,5.777,0.375,8.294
			c1.562,2.517,4.301,4.053,7.262,4.053h87.748l-95.616,227.089c-1.63,3.883-0.179,8.388,3.413,10.59
			c1.382,0.845,2.918,1.254,4.446,1.254c2.449,0,4.864-1.05,6.537-3.029l273.067-324.267
			C401.206,182.161,401.667,178.611,400.268,175.599z" fill="#000000" />
          </g>
        </svg>
        <input type="range" min="0" max="60" value="10" class="slider" id="myRange" oninput="rangevalue.value=value">
        <output id="rangevalue" class="number">10</output>
      </div>
    </div>
    <div class='data temperature'>
      <div class='side-by-side icon'>
        <svg enable-background='new 0 0 19.438 54.003' height=54.003px id=Layer_1 version=1.1
          viewBox='0 0 19.438 54.003' width=19.438px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg
          xmlns:xlink=http://www.w3.org/1999/xlink y=0px>
          <g>
            <path d='M11.976,8.82v-2h4.084V6.063C16.06,2.715,13.345,0,9.996,0H9.313C5.965,0,3.252,2.715,3.252,6.063v30.982
C1.261,38.825,0,41.403,0,44.286c0,5.367,4.351,9.718,9.719,9.718c5.368,0,9.719-4.351,9.719-9.718
c0-2.943-1.312-5.574-3.378-7.355V18.436h-3.914v-2h3.914v-2.808h-4.084v-2h4.084V8.82H11.976z M15.302,44.833
c0,3.083-2.5,5.583-5.583,5.583s-5.583-2.5-5.583-5.583c0-2.279,1.368-4.236,3.326-5.104V24.257C7.462,23.01,8.472,22,9.719,22
s2.257,1.01,2.257,2.257V39.73C13.934,40.597,15.302,42.554,15.302,44.833z' fill=#F29C21 />
          </g>
        </svg>
      </div>
      <div class='side-by-side reading' id="temp">-</div>
      <div class='side-by-side reading'>&deg;C</div>
    </div>
    <div class='data humidity'>
      <div class='side-by-side icon'>
        <svg enable-background='new 0 0 29.235 40.64' height=40.64px id=Layer_1 version=1.1 viewBox='0 0 29.235 40.64'
          width=29.235px x=0px xml:space=preserve xmlns=http://www.w3.org/2000/svg
          xmlns:xlink=http://www.w3.org/1999/xlink y=0px>
          <path d='M14.618,0C14.618,0,0,17.95,0,26.022C0,34.096,6.544,40.64,14.618,40.64s14.617-6.544,14.617-14.617
C29.235,17.95,14.618,0,14.618,0z M13.667,37.135c-5.604,0-10.162-4.56-10.162-10.162c0-0.787,0.638-1.426,1.426-1.426
c0.787,0,1.425,0.639,1.425,1.426c0,4.031,3.28,7.312,7.311,7.312c0.787,0,1.425,0.638,1.425,1.425
C15.093,36.497,14.455,37.135,13.667,37.135z' fill=#3C97D3 />
        </svg>
      </div>
      <div class='side-by-side reading' id="humidity">-</div>
      <div class='side-by-side reading'>%</div>
    </div>
  </div>
  <div>
    <a href="config.html">
      <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px" y="0px" width=30px height=30px viewBox="0 0 311.094 311.094"
        style="enable-background:new 0 0 311.094 311.094;" xml:space="preserve">
        <g>
          <path style="fill:#231F20;"
            d="M174.04,311.076h-39.05c-8.188,0-15.122-5.876-16.463-13.958l-4.588-28.18
     c-2.082-0.759-4.147-1.588-6.176-2.453L85.07,283.761c-6.282,4.764-15.828,4.288-21.581-1.165L35.15,255.757
     c-5.629-5.347-6.811-14.064-2.806-20.716l15.758-26.186c-1.853-3.882-3.512-7.888-4.941-11.964l-30.068-6.617
     C5.364,188.562,0,181.857,0,173.969l0.018-39.05c0.018-8.223,5.911-15.14,13.993-16.446l30.651-4.994
     c1.218-3.07,2.576-6.105,4.041-9.07l-16.852-27.58c-4.059-6.635-2.929-15.334,2.665-20.716L62.731,29.08
     c5.664-5.505,15.158-6.105,21.545-1.306l25.657,19.269c1.2-0.476,2.4-0.935,3.635-1.376l4.976-31.692
     c1.323-8.082,8.258-13.958,16.446-13.958h39.05c7.782,0,14.628,5.505,16.287,13.111l7.147,32.521
     c1.112,0.406,2.206,0.794,3.3,1.235l27.474-18.652c6.335-4.27,15.299-3.564,20.84,1.694l28.357,26.839
     c5.982,5.664,6.952,14.699,2.312,21.492l-17.54,25.816c1.553,3.106,2.965,6.282,4.235,9.511l30.668,5.011
     c8.099,1.323,13.975,8.241,13.975,16.446l-0.018,39.05c0,7.782-5.523,14.628-13.111,16.269l-30.068,6.582
     c-1.288,3.688-2.753,7.288-4.394,10.782l16.746,24.333c4.641,6.758,3.723,15.793-2.188,21.475l-28.18,27.033
     c-5.523,5.311-14.469,6.07-20.84,1.818l-24.563-16.446c-2.523,1.129-5.117,2.188-7.799,3.159l-6.335,28.886
     C188.668,305.571,181.822,311.076,174.04,311.076z M137.213,291.807h34.744l7.058-32.133c0.741-3.37,3.229-6.088,6.511-7.129
     c5.347-1.676,10.464-3.706,15.369-6.211c3.123-1.588,6.864-1.359,9.74,0.582l27.386,18.334l25.075-24.051l-18.704-27.174
     c-2.029-2.964-2.259-6.794-0.565-9.97c3-5.647,5.488-11.717,7.394-18.052c1.006-3.353,3.741-5.894,7.164-6.635l33.403-7.323
     l0.018-34.744l-34.039-5.576c-3.512-0.582-6.423-3.053-7.57-6.423c-2.047-6.035-4.535-11.611-7.623-17.046
     c-1.8-3.194-1.659-7.147,0.424-10.164l19.569-28.833l-25.233-23.892L209.543,64.23c-0.3,0.371-0.6,0.688-0.935,0.971
     c-2.859,2.559-7.023,3.159-10.499,1.518c-3.9-1.835-7.994-3.247-12.14-4.553c-3.882-1.235-6.564-4.8-6.705-8.876l-7.323-34.003
     h-34.727l-5.629,34.444l-0.371-0.071c-0.865,3.6-3.088,7.499-6.176,8.488c-4.288,1.376-8.488,2.841-12.493,4.764
     c-3.564,1.676-7.746,1.076-10.64-1.57c-0.265-0.229-0.529-0.512-0.776-0.794L74.465,44.52L49.39,68.554l17.84,29.168
     c0.212,0.282,0.441,0.565,0.618,0.865c2.012,3.017,2.17,6.899,0.406,10.058c-2.929,5.241-5.4,10.817-7.358,16.534
     c-1.147,3.37-4.059,5.841-7.588,6.405l-34.021,5.558l-0.018,34.744l33.403,7.341c3.406,0.759,6.158,3.3,7.164,6.652
     c1.941,6.547,4.553,12.864,7.746,18.775c1.623,3,1.535,6.635-0.229,9.546l-17.452,28.974l25.216,23.892l25.569-19.446
     c2.912-2.223,6.882-2.594,10.146-0.953c4.676,2.329,9.529,4.235,14.575,5.823c3.459,1.094,6.017,4.041,6.617,7.623L137.213,291.807
     z M156.553,214.184c-31.392,0-56.943-25.551-56.943-56.943c0-31.409,25.551-56.96,56.943-56.96c31.409,0,56.96,25.551,56.96,56.96
     C213.531,188.633,187.98,214.184,156.553,214.184z M156.553,119.55c-20.769,0-37.674,16.905-37.674,37.691
     c0,20.769,16.905,37.674,37.674,37.674c20.787,0,37.691-16.905,37.691-37.674C194.244,136.454,177.34,119.55,156.553,119.55z" />
        </g>
      </svg>
    </a>
    <span>&nbsp;&nbsp;&nbsp;</span>
    <a href="https://milanoss.github.io/rekuperace/">
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px" y="0px" width=30px height=30px viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;"
        xml:space="preserve">
        <g>
          <path d="M488.399,492h-21.933V173.536c0-14.823-12.06-26.882-26.882-26.882H390.56c-14.823,0-26.882,12.06-26.882,26.882V492
			h-55.692V317.825c0-14.823-12.059-26.882-26.882-26.882H232.08c-14.823,0-26.882,12.06-26.882,26.882V492h-55.692v-90.204
			c0-14.823-12.06-26.882-26.882-26.882H73.599c-14.823,0-26.882,12.06-26.882,26.882V492H23.601c-5.523,0-10,4.477-10,10
			s4.477,10,10,10h464.798c5.523,0,10-4.477,10-10S493.922,492,488.399,492z M129.504,492H66.716v-90.204
			c0-3.795,3.087-6.882,6.882-6.882h49.024c3.795,0,6.882,3.087,6.882,6.882V492z M287.985,492h-62.788V317.825
			c0-3.795,3.087-6.882,6.882-6.882h49.024c3.794,0,6.882,3.087,6.882,6.882V492z M446.466,492h-62.788V173.536
			c0-3.795,3.087-6.882,6.882-6.882h49.024c3.795,0,6.882,3.087,6.882,6.882V492z" />
        </g>
        <g>
          <path d="M466.442,10.516c0.14-2.729-0.82-5.504-2.904-7.588c-2.084-2.084-4.859-3.045-7.588-2.904
			C455.789,0.017,455.63,0,455.466,0h-60.5c-5.523,0-10,4.477-10,10s4.477,10,10,10h37.357l-98.857,98.858l-37.28-37.28
			c-1.875-1.875-4.419-2.929-7.071-2.929c-2.652,0-5.196,1.054-7.071,2.929l-179.769,179.77c-3.905,3.905-3.905,10.237,0,14.143
			c1.953,1.951,4.512,2.927,7.071,2.927s5.119-0.976,7.071-2.929L289.115,102.79l37.28,37.28c3.905,3.905,10.237,3.905,14.143,0
			L446.466,34.143v33.81c0,5.523,4.477,10,10,10s10-4.477,10-10V11C466.466,10.837,466.449,10.678,466.442,10.516z" />
        </g>
        <g>
          <circle cx="75.64" cy="303.31" r="10" />
        </g>

      </svg>

    </a>
  </div>
</body>

</html>